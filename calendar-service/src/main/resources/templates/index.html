<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title th:text="#{label.title}">TSI Calendar</title>

    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../static/css/bootstrap-select.min.css" th:href="@{/css/bootstrap-select.min.css}" rel="stylesheet"/>

    <link href="../static/css/fullcalendar.min.css" th:href="@{/css/fullcalendar.min.css}" rel="stylesheet"/>
    <link href="../static/css/app.css" th:href="@{/css/app.css}" rel="stylesheet"/>

</head>

<body>
<div class="container">

    <div class="page-header">
        <form class="form-horizontal">
            <div class="form-group form-group-sm">
                <div class="col-sm-9">
                    <h1 th:text="#{label.title}">TSI Calendar</h1>
                </div>
                <div class="col-sm-3">
                    <p class="text-right">
                        <a id="change-lang-lv" href="/?lang=lv">lv</a> /
                        <a id="change-lang-ru" href="/?lang=ru">ru</a> /
                        <a id="change-lang-en" href="/?lang=en">en</a>
                    </p>
                </div>
            </div>
        </form>
    </div>

    <div class="row">
        <div class="col-md-9" id="calendar"></div>
        <div class="col-md-3">
            <form action="#" th:action="@{/home}" th:object="${searchBean}" method="post">
                <div class="form-group">
                    <label class="control-label" for="filter-type" th:text="#{label.filter_type}">Filter type</label>
                    <select class="form-control selectpicker" id="filter-type" autofocus="true"
                            th:field="*{filterType}">
                        <option th:text="#{label.type_by_group}" value="group">By Group</option>
                        <option th:text="#{label.type_by_room}" value="room">By Room</option>
                        <option th:text="#{label.type_by_teacher_name}" value="teacher">By Teacher Name</option>
                    </select>

                    <label class="control-label" th:text="#{label.filter_value}">Filter value</label>
                    <div class="input-group" id="filter-groups">
                        <select class="form-control selectpicker" id="filter-value-group" th:field="*{groupValue}">
                            <option th:each="data : ${groups}" th:value="${data.id}" th:text="${data.name}">4102BNL
                            </option>
                        </select>
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default" th:text="#{label.search}">Search</button>
                        </span>
                    </div>
                    <div class="input-group" id="filter-teachers">
                        <select class="form-control selectpicker" id="filter-value-teacher" th:field="*{teacherValue}">
                            <option th:each="data : ${teachers}" th:value="${data.id}" th:text="${data.name}">Vasiliy
                                Pupkin
                            </option>
                        </select>
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default" th:text="#{label.search}">Search</button>
                        </span>
                    </div>
                    <div class="input-group" id="filter-rooms">
                        <select class="form-control selectpicker" id="filter-value-room" th:field="*{roomValue}">
                            <option th:each="data : ${rooms}" th:value="${data.id}" th:text="${data.name}">304
                            </option>
                        </select>
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default" th:text="#{label.search}">Search</button>
                        </span>
                    </div>


                    <label th:text="#{label.calendar_url}" for="calendar-url">Calendar URL</label>
                    <div class="input-group">
                        <div class="input-group-addon">#</div>
                        <input type="text" class="form-control" th:value="${calendarURL}" id="calendar-url" readonly="true"/>
                    </div>
                    <p th:text="#{label.url_comment}">Use this URL to configure your Outlook, Google Calendar or other
                        electronic organizer.</p>
                    <p th:text="#{label.info_coment}">For information on how to configure you calendar client please
                        read <a>this</a> guide.</p>
                </div>
            </form>

        </div>
    </div>

</div> <!-- /container -->


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="../static/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
<script src="../static/js/bootstrap-select.min.js" th:src="@{/js/bootstrap-select.min.js}"></script>
<script src='../static/js/moment.min.js' th:src="@{/js/moment.min.js}"></script>
<script src='../static/js/fullcalendar.min.js' th:src="@{/js/fullcalendar.min.js}"></script>
<script src='../static/js/lang/en.js' th:src="@{'/js/lang/' + ${#locale} + '.js'}"></script>
<script th:inline="javascript">
    var triggerDisplayRules = function () {
        if ($('#filter-type').val() === 'room') {
            $('#filter-rooms').removeClass("hidden");
            $('#filter-groups').addClass("hidden");
            $('#filter-teachers').addClass("hidden");
        } else if ($('#filter-type').val() === 'teacher') {
            $('#filter-rooms').addClass("hidden");
            $('#filter-groups').addClass("hidden");
            $('#filter-teachers').removeClass("hidden");
        } else {
            $('#filter-rooms').addClass("hidden");
            $('#filter-groups').removeClass("hidden");
            $('#filter-teachers').addClass("hidden");
        }
    };

    $('#filter-type').on('change', function () {
        triggerDisplayRules();
    });

    $(document).ready(function () {
        $('#calendar').fullCalendar({
            /*<![CDATA[*/
            events: /*[[${events}]]*/ null
            /*]]>*/
        });
        triggerDisplayRules();
    });


</script>
</body>
</html>
